---
layout:     post
title:      什么是Java反射
subtitle:   什么是Java反射
date:       2017-12-26
author:     mushuzi
header-img: img/post-bg-ios9-web.jpg
catalog: true
tags:
   - Java
--- 

# 前言
Java的反射机制是Java特性之一，反射机制是构建框架技术的基础所在。灵活掌握Java反射机制，对大家以后学习框架技术有很大的帮助。

那么什么是Java的反射呢？ 参考网络的资料本文做了以下简单的总结[](https://www.zhihu.com/question/24304289),[](http://762626559-qq-com.iteye.com/blog/395402)

# 正文
大家都知道，要让Java程序能够运行，那么就得让Java类要被Java虚拟机加载。Java类如果不被Java虚拟机加载，是不能正常运行的。现在我们运行的所有的程序所需要的那个类都是在编译期的时候就已经被加载了的，这些被编译时加载的类也称为静态加载类。

而实际编程中，并不能保证在任何时候编程所需要的那个类都已经完备。我们看这样一个例子：

假如我们有两个程序员，一个程序员在写程序的时候，需要使用第二个程序员所写的类中的方法或成员变量，但第二个程序员并没完成他所写的类。那么第一个程序员的代码能否通过编译呢？这是不能通过编译的。

而利用Java反射的机制，就可以让第一个程序员在没有得到第二个程序员所写的类的时候，来完成自身代码的编译。因为利用反射机制编写的代码能够“逃过”编译时JVM的“审查”，而在程序实际运行的时候才加载这个需要的类，这就是一种动态加载的机制。


当我们的程序在运行时，需要动态的加载一些类，这些类可能之前用不到，所以不用加载到jvm，而是在运行时根据需要才加载，这样的好处对于服务器来说不言而喻。

再举个例子：在实际开发中，我们的项目底层有时是用mysql，有时用oracle，需要动态地根据实际情况加载驱动类，这个时候反射就有用了，假设 com.java.dbtest.myqlConnection，com.java.dbtest.oracleConnection这两个类我们要用，这时候我们的程序就需要写得比较动态化，通过：

    Class tc = Class.forName("com.java.dbtest.TestConnection");

通过类的全类名让jvm在服务器中找到并加载这个类，而如果是oracle则传入的参数就变成另一个了。这时候就可以看到反射的好处了——为Java提供极强的动态性！再举多个例子，大家如果接触过spring，会发现当你配置各种各样的bean时，是以配置文件的形式配置的，你需要用到哪些bean就配哪些，spring容器就会根据你的需求去动态加载，你的程序就能健壮地运行。

利用Java的反射机制可以知道类的基本结构，这种对Java类结构探知的能力，我们称为Java类的“自审”。以大家都用过的eclipse为例，当我们构建出一个对象，去调用该对象的方法和属性的时候。一按点，编译工具就会自动的把该对象能够使用的所有的方法和属性全部都列出来，供用户进行选择。这就是利用了Java反射的原理，是对我们创建对象的探知、自审。

Java 反射机制主要提供了以下功能

* 在运行时判断任意一个对象所属的类。
* 在运行时构造任意一个类的对象。
* 在运行时判断任意一个类所具有的成员变量和方法。
* 在运行时调用任意一个对象的方法

Java反射机制的实现要借助于4个类：
* Class：类的类类型
* Constructor：类的构造器对象
* Field：类的属性对象
* Method：类的方法对象

java.lang.Class这个类是Java反射机制的起源。当一个类被加载以后，Java虚拟机就会自动产生一个Class对象。通过这个Class对象我们就能获得加载到虚拟机当中这个Class对象对应的方法、成员以及构造方法的声明和定义等信息。其余的包括构造器、属性、方法等都是建立在Class对象的正确操作的基础上的。

